import { Meta } from '../components/Meta';
import { IconPlayerSkipBack, IconSettings } from '@tabler/icons-react';
import { Center } from '@mantine/core';
import { Link } from 'wouter';
import { env } from '../env';

<Meta title='Mobile assistant instructions - Mahjong Pantheon'
      description='How to start playing using Mahjong Pantheon' />

### How to use mobile assistant

If you didn't register to the system yet, please read <Link to='/getStarted'>this page</Link>.

Open the <a href={env.urls.tyr} target='_blank'>mobile assistant</a> and log in to the system:

<Center><img src='/assets/img/forPlayers/tyr-1-login.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After login you will see a list of active events that you participate in:

<Center><img src='/assets/img/forPlayers/tyr-2-select-event.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After selecting appropriate tournament or club rating, you will see your current status in the event on the main screen:

<Center><img src='/assets/img/forPlayers/tyr-3-ongoing-game-home.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

You can select light or dark theme, your preferred language and also switch to another event on the settings
page ("<IconSettings size={14} />" icon):

<Center><img src='/assets/img/forPlayers/tyr-4-settings.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

### Participating in tournament

The seating is generated by administrator of the tournament. After seating is ready, administrators notify players
that they can already take their seats. You will see number of the table and your initial wind (seat) in your
mobile assistant:

<Center><img src='/assets/img/forPlayers/tyr-5-tourn-table-number.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

During the tournament all games start simultaneously. According to EMA regulations, you will have ~90 minutes for
each game session, 75 minutes are guaranteed and the rest 15 minutes are required to finish current hand and play
one more. You will see a timer in your mobile assistant and on projector (if tournament crew has one), starting
from 75 minutes:

<Center><img src='/assets/img/forPlayers/tyr-6-tourn-table-timer.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

When guaranteed time is out, you should finish current hand and play one more, accoriding to EMA regulations. When
time is out, you will see the following in your mobile assistant:

<Center><img src='/assets/img/forPlayers/tyr-7-tourn-table-time-out.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

Tournament sessions are finished simultaneously as well, when the administrator presses "Confirm results" button.
After that, no hands can be cancelled and new seating can be prepared.

### Participating in club ratings

In club ratings game sessions are started by players, there is no timer and no automated seatings. Each player will
have a 'New game' button in their mobile assistant:

<Center><img src='/assets/img/forPlayers/tyr-8-club-home.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After pressing that button, you will need to select session participants and, optionally, shuffle them:

<Center><img src='/assets/img/forPlayers/tyr-9-select-players.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After start button is pressed, the game is considered started. Club games are finished automatically when fourth
south round is over, or according to ruleset (e.g. if any player has score below zero).

### Common gotchas

Here we describe some common things that are applicable both for tournaments and club ratings.

<Center><img src='/assets/img/forPlayers/tyr-10-club-game.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

To add new hand, you need to press the "+' button, and then select the outcome. Note that if your hand finished with
double or triple ron, you should nevertheless select "Ron" and then just select all winners.

<Center><img src='/assets/img/forPlayers/tyr-11-club-game-select-outcome.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After outcome is selected, you need to select a winner (or several winners, in case of double/triple ron) and a loser.
In some cases there might be only a winner or only a loser to select (e.g. tsumo or chombo). In case of a draw, tempai
players are considered winners and noten players are considered losers.

<Center><img src='/assets/img/forPlayers/tyr-12-select-winners.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

Note that riichi sticks should be selected before selecting yaku. The mobile assistant won't allow you to select or
deselect riichi and double-riichi yaku otherwise and will ask to go to previous page.

By default, the system considers your hand closed; if a hand is opened, you are required to press "Open hand" button
in the top of yaku list.

<Center><img src='/assets/img/forPlayers/tyr-13-select-yaku.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

Note that the mobile assistant won't allow you to select incompatible yaku, e.g. it's impossible to select tan-yao and
yakuhai at the same time. It ensures that players will not make some silly mistakes during logging the game. We still
kindly ask you to be careful when selecting yaku and other things related to the game.

On the next tab you can select count of dora and fu. Note that there might be conditions when fu count can be fixed
or restricted (e.g. when chiitoitsu yaku is selected you can't select other than 25 fu, when pin-fu selected with
tsumo outcome - you can select only 20 fu, and when you have riichi without pin-fu, you can select no less than 30 fu).

<Center><img src='/assets/img/forPlayers/tyr-14-select-dora.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

If you log current hand, please show other players at the table the screen with preliminary results. They should
agree with the results before you press the "OK" button.

<Center><img src='/assets/img/forPlayers/tyr-15-preview.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

After the hand is logged, the score at the status page is updated. Pressing on someone's score will allow you to see
the difference in score between this particular player and all others.

There is no mandatory approval of hand results by **all** players, but all scores are displayed in mobile assistants
of all players, and they can request to challenge the results followed by cancellation of the last logged hand. The
referee should be called in such cases to ensure there is no fraud, also only referee can cancel the last played hand.
In rare cases you could need to fix log of the hand that was played some hands ago. It's possible, but only if players
do clearly remember all hands that are to be cancelled, because they will need to log them once again. Such cases
should be discussed with tournament referees.

To see what's need logged before, each player can press the "<IconPlayerSkipBack size={14} />" button in their mobile
assistant. All logged hands will be displayed as a table. Pressing any particular row in the table will show the details:

<Center><img src='/assets/img/forPlayers/tyr-16-last-rounds.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

When game is finished, the game results screen is shown. If you suspect something is counted incorrectly, please notify
event administrators - they can cancel last hand.

<Center><img src='/assets/img/forPlayers/tyr-17-results.avif' style={{ maxWidth: 500, width: '100%' }} /></Center>

During spare time between game sessions players may watch their stats by following the "Statistics" link on the main
page of mobile assistant. You can see current state of rating table, all finished games (except ones that are just
finished, before the administrator presses the "Confirm" button), and also personal stats of any player on their own page.
